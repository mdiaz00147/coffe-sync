(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a47ae"],{"072c":function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("b-card",{staticClass:"col-12",attrs:{"no-body":""}},[e("form",{on:{submit:t.createSubscription}},[t.loading?e("div",{staticClass:"text-center mt-5 mb-5"},[e("i",{staticClass:"fa fa-circle-o-notch fa-spin fa-fw view__loader fa-lg"}),e("br"),t._v("loading ")]):t._e(),t.loading?t._e():e("b-row",{staticClass:"mt-3 print__action"},[e("b-col",{staticClass:"my-1",attrs:{md:"12"}},[e("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:"Expiration"}},[e("b-input-group",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.expiration_date,expression:"form.expiration_date"}],staticClass:"form-control",attrs:{name:"expiration_date",type:"date"},domProps:{value:t.form.expiration_date},on:{input:function(o){o.target.composing||t.$set(t.form,"expiration_date",o.target.value)}}})])],1)],1)],1),!t.loading&&t.edit_mode?e("b-row",{staticClass:"mt-3 mb-3 print__action"},[e("b-col",{staticClass:"my-2",attrs:{md:"12",sm:"12"}},[e("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:"Status"}},[e("b-input-group",[e("b-form-select",{model:{value:t.form.subscription_status,callback:function(o){t.$set(t.form,"subscription_status",o)},expression:"form.subscription_status"}},[e("option",{domProps:{value:"active"}},[t._v("Active")]),e("option",{domProps:{value:"expired"}},[t._v("Expired")]),e("option",{domProps:{value:"academy"}},[t._v("Academy")])])],1)],1)],1)],1):t._e(),e("b-row",[e("b-form-group",{staticClass:"col-4",attrs:{"label-sr-only":""}},[e("b-form-checkbox-group",{attrs:{stacked:""}},[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.payments_enabled,expression:"form.payments_enabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"payments_enabled"},domProps:{checked:Array.isArray(t.form.payments_enabled)?t._i(t.form.payments_enabled,null)>-1:t.form.payments_enabled},on:{change:function(o){var e=t.form.payments_enabled,a=o.target,s=!!a.checked;if(Array.isArray(e)){var n=null,i=t._i(e,n);a.checked?i<0&&t.$set(t.form,"payments_enabled",e.concat([n])):i>-1&&t.$set(t.form,"payments_enabled",e.slice(0,i).concat(e.slice(i+1)))}else t.$set(t.form,"payments_enabled",s)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"payments_enabled"}},[t._v("Payments enabled")])])])],1),e("b-form-group",{staticClass:"col-4",attrs:{"label-sr-only":""}},[e("b-form-checkbox-group",{attrs:{stacked:""}},[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.big_pro_account,expression:"form.big_pro_account"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"big_pro_account"},domProps:{checked:Array.isArray(t.form.big_pro_account)?t._i(t.form.big_pro_account,null)>-1:t.form.big_pro_account},on:{change:function(o){var e=t.form.big_pro_account,a=o.target,s=!!a.checked;if(Array.isArray(e)){var n=null,i=t._i(e,n);a.checked?i<0&&t.$set(t.form,"big_pro_account",e.concat([n])):i>-1&&t.$set(t.form,"big_pro_account",e.slice(0,i).concat(e.slice(i+1)))}else t.$set(t.form,"big_pro_account",s)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"big_pro_account"}},[t._v("Big Pro Account")])])])],1)],1),e("hr"),t.edit_mode?t._e():e("b-row",[e("b-form-group",{staticClass:"col-12 col-md-4",attrs:{label:"Username","label-for":"elementsAppend"}},[e("v-select",{attrs:{loading:t.loading,onChange:function(o){return t.setUserSuscriptions(o)},options:t.options,placeholder:"Query to search"}})],1),e("b-form-group",{staticClass:"col-12 col-md-4",attrs:{label:"txid","label-for":"elementsAppend"}},[e("b-input-group",[e("b-form-input",{attrs:{type:"text"},model:{value:t.form.txid,callback:function(o){t.$set(t.form,"txid",o)},expression:"form.txid"}})],1)],1),e("b-form-group",{staticClass:"col-12 col-md-4",attrs:{label:"Plan code","label-for":"elementsAppend"}},[e("v-select",{attrs:{loading:t.loading,onChange:function(o){return t.setPlan(o)},options:t.PlanOptions,placeholder:"Query to search",reduce:function(t){return t.code}}})],1),e("b-col",{staticClass:"mb-3 mt-3",attrs:{md:"12",sm:"12"}},[t.edit_mode?e("button",{staticClass:"btn btn-warning btn-block"},[t._v("Update Now")]):t._e(),t.edit_mode?t._e():e("button",{staticClass:"btn btn-success btn-block"},[t._v(" Create Now "),e("i",{staticClass:"fa fa-plus"})])])],1)],1)])],1)},s=[],n=(e("56d7"),e("2ef0"),e("b206")),i={name:"subscriptions-new",components:{"v-select":n["a"]},data:function(){return{options:[],PlanOptions:[],tool_uuid:!1,edit_mode:!1,loading:!1,form:{big_pro_account:!1,payments_enabled:!0}}},created:function(){this.listUsers(),this.listPlans(),this.$route.params.uuid&&(this.edit_mode=!0,this.tool_uuid=this.$route.params.uuid,this.fetchSubscription(this.$route.params.uuid))},methods:{setUserSuscriptions:function(t){this.form.username=t},setPlan:function(t){this.form.plan_id=t.code},listUsers:function(){var t=this;this.loading=!0,this.$http({url:"/api/v1/admin/users/usernames",headers:{"content-type":"application/json",Authorization:this.$store.getters.authToken}}).then((function(o){t.options=o.data,t.loading=!1})).catch((function(o){o.response.data.map((function(o){t.$toasted.show(o,{position:"top-right",duration:5e3,type:"error",closeOnSwipe:!0}),t.loading=!1}))}))},listPlans:function(){var t=this;this.loading=!0,this.$http({url:"/api/v1/admin/plans",headers:{"content-type":"application/json",Authorization:this.$store.getters.authToken}}).then((function(o){t.PlanOptions=o.data,t.loading=!1})).catch((function(o){o.response.data.map((function(o){t.$toasted.show(o,{position:"top-right",duration:5e3,type:"error",closeOnSwipe:!0}),t.loading=!1}))}))},fetchSubscription:function(t){var o=this;this.loading=!0,this.$http("/api/v1/admin/subscriptions/".concat(t),{headers:{"content-type":"application/json",Authorization:this.$store.getters.authToken}}).then((function(t){o.form=t.data,o.loading=!1})).catch((function(t){console.log(t.response),o.loading=!1}))},createSubscription:function(t){var o,e=this;t.preventDefault();var a=this.edit_mode?"PUT":"POST";this.edit_mode||(o="/api/v1/admin/subscriptions"),this.edit_mode&&(o="/api/v1/admin/subscriptions/".concat(this.form.id)),this.loading=!0;var s=new FormData;s.append("subscription_status",this.form.subscription_status),s.append("expiration",this.form.expiration_date),s.append("payments_enabled",this.form.payments_enabled),s.append("big_pro_account",this.form.big_pro_account),s.append("username",this.form.username),s.append("txid",this.form.txid),s.append("plan_id",this.form.plan_id),this.$http({url:o,data:s,method:a,headers:{"content-type":"application/json",Authorization:this.$store.getters.authToken}}).then((function(t){var o=e.edit_mode?"Subscription successfully updated":"Subscription successfully created";e.$toasted.show(o,{position:"top-right",duration:5e3,type:"default",closeOnSwipe:!0}),e.edit_mode||e.reset(),e.loading=!1})).catch((function(t){t.response.data.map((function(t){e.$toasted.show(t,{position:"top-right",duration:5e3,type:"error",closeOnSwipe:!0}),e.loading=!1}))}))},reset:function(){this.form={publish:!0}}}},r=i,c=e("2877"),l=Object(c["a"])(r,a,s,!1,null,null,null);o["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0a47ae.71c3810d.js.map